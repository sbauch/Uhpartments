/**
 * impress.js
 *
 * impress.js is a presentation tool based on the power of CSS3 transforms and transitions
 * in modern browsers and inspired by the idea behind prezi.com.
 *
 * MIT Licensed.
 *
 * Copyright 2011 Bartek Szopka (@bartaz)
 */
(function(a,b){"use strict";var c=function(){var b=a.createElement("dummy").style,c="Webkit Moz O ms Khtml".split(" "),d={};return function(a){if(typeof d[a]=="undefined"){var e=a.charAt(0).toUpperCase()+a.substr(1),f=(a+" "+c.join(e+" ")+e).split(" ");d[a]=null;for(var g in f)if(b[f[g]]!==undefined){d[a]=f[g];break}}return d[a]}}(),d=function(a){return[].slice.call(a)},e=function(a,b){var d,e;for(d in b)b.hasOwnProperty(d)&&(e=c(d),e!=null&&(a.style[e]=b[d]));return a},f=function(b){return a.getElementById(b)},g=function(b,c){return c=c||a,c.querySelector(b)},h=function(b,c){return c=c||a,d(c.querySelectorAll(b))},i=function(a){return" translate3d("+a.x+"px,"+a.y+"px,"+a.z+"px) "},j=function(a,b){var c=" rotateX("+a.x+"deg) ",d=" rotateY("+a.y+"deg) ",e=" rotateZ("+a.z+"deg) ";return b?e+d+c:c+d+e},k=function(a){return" scale("+a+") "},l=navigator.userAgent.toLowerCase(),m=c("perspective")!=null&&l.search(/(iphone)|(ipod)|(ipad)|(android)/)==-1,n=f("impress");if(!m){n.className="impress-not-supported";return}n.className="";var o=a.createElement("div");o.className="canvas",d(n.childNodes).forEach(function(a){o.appendChild(a)}),n.appendChild(o);var p=h(".step",n);a.documentElement.style.height="100%",e(a.body,{height:"100%",overflow:"hidden"});var q={position:"absolute",transformOrigin:"top left",transition:"all 0s ease-in-out",transformStyle:"preserve-3d"};e(n,q),e(n,{top:"50%",left:"50%",perspective:"1000px"}),e(o,q);var r={translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},scale:1};p.forEach(function(a,b){var c=a.dataset,d={translate:{x:c.x||0,y:c.y||0,z:c.z||0},rotate:{x:c.rotateX||0,y:c.rotateY||0,z:c.rotateZ||c.rotate||0},scale:c.scale||1};a.stepData=d,a.id||(a.id="step-"+(b+1)),e(a,{position:"absolute",transform:"translate(-50%,-50%)"+i(d.translate)+j(d.rotate)+k(d.scale),transformStyle:"preserve-3d"})});var s=null,t=null,u=function(a){if(!a||!a.stepData||a==s)return!1;b.scrollTo(0,0);var c=a.stepData;s&&s.classList.remove("active"),a.classList.add("active"),n.className="step-"+a.id,b.clearTimeout(t),t=b.setTimeout(function(){b.location.hash="#/"+a.id},1e3);var d={rotate:{x:-parseInt(c.rotate.x,10),y:-parseInt(c.rotate.y,10),z:-parseInt(c.rotate.z,10)},translate:{x:-c.translate.x,y:-c.translate.y,z:-c.translate.z},scale:1/parseFloat(c.scale)},f=d.scale>=r.scale,g=s?"1s":"0";return e(n,{perspective:c.scale*1e3+"px",transform:k(d.scale),transitionDuration:g,transitionDelay:f?"500ms":"0ms"}),e(o,{transform:j(d.rotate,!0)+i(d.translate),transitionDuration:g,transitionDelay:f?"0ms":"500ms"}),r=d,s=a,a},v=function(){var a=p.indexOf(s)-1;return a=a>=0?p[a]:p[p.length-1],u(a)},w=function(){var a=p.indexOf(s)+1;return a=a<p.length?p[a]:p[0],u(a)};a.addEventListener("keydown",function(a){if(a.keyCode==9||a.keyCode>=32&&a.keyCode<=34||a.keyCode>=37&&a.keyCode<=40){switch(a.keyCode){case 33:case 37:case 38:v();break;case 9:case 32:case 34:case 39:case 40:w()}a.preventDefault()}},!1),a.addEventListener("click",function(b){var c=b.target;while(c.tagName!="A"&&!c.stepData&&c!=a.body)c=c.parentNode;if(c.tagName=="A"){var d=c.getAttribute("href");d&&d[0]=="#"&&(c=f(d.slice(1)))}u(c)&&b.preventDefault()},!1);var x=function(){return f(b.location.hash.replace(/^#\/?/,""))};b.addEventListener("hashchange",function(){u(x())},!1),u(x()||p[0])})(document,window)